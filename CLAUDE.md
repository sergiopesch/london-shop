# London Shop - Claude Code Instructions

## Project Overview

London Shop is a Next.js 15 e-commerce application selling London-themed merchandise including hoodies, t-shirts, memory games, and mugs. It features a customer-facing shop and an admin dashboard for managing customers and feedback.

## Tech Stack

- **Framework**: Next.js 15.1.0 with App Router
- **Language**: TypeScript 5
- **UI**: React 19, shadcn/ui components, Radix UI primitives
- **Styling**: Tailwind CSS 3.4
- **State Management**: React Context (cart), TanStack React Query
- **Database**: Supabase (optional - app works without it)
- **Forms**: React Hook Form + Zod validation
- **Animation**: Framer Motion

## Project Structure

```
app/                    # Next.js App Router pages
├── api/               # API routes
│   ├── admin/         # Admin authentication endpoints
│   ├── customers/     # Customer data endpoint
│   └── feedback/      # Feedback data endpoint
├── admin/             # Admin dashboard pages
├── shop/              # Product catalog with dynamic routing
│   ├── [category]/    # Category pages (hoodies, t-shirts, etc.)
│   └── [category]/[product]/ # Individual product pages
└── (static pages)     # about, contact, privacy, terms, waitlist

components/             # React components
├── ui/                # shadcn/ui components (DO NOT EDIT DIRECTLY)
├── admin/             # Admin-specific components
├── product/           # Product display components
└── (business)         # Cart, navigation, footer, etc.

lib/                   # Utility functions and logic
├── auth.ts            # Server-side admin authentication
├── supabase.ts        # Database client (handles missing config gracefully)
├── products.ts        # Product data and search functions
└── utils.ts           # General utilities (cn function)

context/               # React Context providers
├── cart-context.tsx   # Shopping cart state (localStorage persisted)
└── auth-context.tsx   # Auth state management

hooks/                 # Custom React hooks
```

## Key Commands

```bash
pnpm dev        # Start development server (http://localhost:3000)
pnpm build      # Build for production
pnpm start      # Start production server
pnpm lint       # Run ESLint
pnpm test       # Run tests
```

## Development Guidelines

### Code Style

- Use TypeScript with strict mode
- Follow existing patterns in the codebase
- Components should be in PascalCase
- Utility functions should be in camelCase
- Use `@/` path alias for imports

### Component Guidelines

- **shadcn/ui components** (in `components/ui/`): Do not modify directly. These are generated by the shadcn CLI
- **Business components**: Should be self-contained with clear props interfaces
- Use the `cn()` utility from `lib/utils.ts` for conditional classes

### State Management

- **Cart**: Use `useCart()` hook from `context/cart-context.tsx`
- **Server State**: Use TanStack React Query for data fetching
- **Auth**: Use `useAuth()` hook from `contexts/auth-context.tsx`

### API Routes

API routes are in `app/api/`. Follow these patterns:
- Return proper HTTP status codes
- Handle errors gracefully
- Use TypeScript types for request/response

### Database

Supabase is optional. The app handles missing configuration gracefully:
- Set `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` for full functionality
- Without Supabase, the app returns empty arrays for data queries

## Environment Variables

Copy `.env.example` to `.env.local` and configure:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

## Admin Access

The admin dashboard is at `/admin`. Authentication uses cookie-based sessions.

**Important**: Move admin credentials to environment variables for production use.

## Testing

Run tests with:
```bash
pnpm test
```

Test files are located alongside their source files with `.test.ts` or `.test.tsx` extensions.

## Common Tasks

### Adding a New Product

1. Add product data to `lib/products.ts`
2. Add product images to `public/images/products/`
3. The product will automatically appear in the appropriate category

### Adding a New Page

1. Create a new folder in `app/` with a `page.tsx` file
2. Follow the existing layout patterns
3. Add navigation links if needed

### Modifying Styles

- Global styles: `app/globals.css`
- Tailwind config: `tailwind.config.ts`
- Component-specific: Use Tailwind classes inline

## Troubleshooting

### Build Fails
- Run `pnpm install` to ensure dependencies are installed
- Check for TypeScript errors with `pnpm build`
- Verify environment variables are set correctly

### Supabase Connection Issues
- Verify environment variables are correct
- Check Supabase project status
- The app will function without Supabase but with limited data
